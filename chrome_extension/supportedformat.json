{
    "manifest_version": 2,
    "name": "Chanters Player",
    "version": "1",
    "icons": {
        "128": "icon_128.png"
    },
    "permissions": [],
    "app": {
        "background": {
            "scripts": ["scripts/chanters.js", "scripts/background.js"]
        }
    },
    "minimum_chrome_version": "28"
        // "browser_action": {
        //     "default_icon": "icon.png",
        //     "default_popup": "public/popup.html"
        // }
}


working copy for chrome app {
    "manifest_version": 2,
    "name": "Chanters Player",
    "version": "1",
    "icons": {
        "128": "icon_128.png"
    },
    "permissions": ["alarms"],
    "app": {
        "background": {
            "scripts": ["scripts/chanters.js", "scripts/background.js"]
        }
    },
    "minimum_chrome_version": "28"
}



working copy of chrome extension {
    "manifest_version": 2,
    "name": "Chanters Player",
    "version": "1",
    "icons": {
        "128": "icon_128.png"
    },
    "permissions": ["alarms"],
    "minimum_chrome_version": "28",
    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "public/popup.html"
    },
    "chrome_url_overrides": {
        "newtab": "index.html"
    }
}


{
    "manifest_version": 2,
    "name": "Chanters Player",
    "version": "1",
    "icons": {
        "128": "icon_128.png"
    },
    "permissions": [
        "http://*/*",
        "https://*/*",
        "https://www.google.com/*",
        "http://www.google.com/*"
    ],
    "minimum_chrome_version": "28",
    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "views/popup.html"
    },
    "chrome_url_overrides": {
        "newtab": "index.html"
    }
}


chrome extension latest version

{
    "manifest_version": 2,
    "name": "Chanters Player",
    "version": "1",
    "icons": {
        "128": "icon_128.png"
    },
    "permissions": [
        "http://*/*",
        "https://*/*",
        "https://www.google.com/*",
        "http://www.google.com/*"
    ],
    "minimum_chrome_version": "28",
    "chrome_url_overrides": {
        "newtab": "index.html"
    },
    "background": {
        "scripts": ["scripts/background.js"],
        "persistent": true
    },
    "content_scripts": [{
        "matches": [
            "http://*/*",
            "https://*/*"
        ],
        "js": ["scripts/contentScript.js"],
        "run_at": "document_end"
    }],
    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "views/popup.html"
    }
}


saveToLocal: function(files) {
    window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;

    window.webkitStorageInfo.requestQuota(PERSISTENT, 1024 * 1024, function(grantedBytes) {
        window.requestFileSystem(window.PERSISTENT, 1024 * 1024, function(fs) {

            for (var i = 0, file; file = files[i]; ++i) {

                (function(f) {
                    fs.root.getFile(f.name, {
                        create: true
                    }, function(fileEntry) {
                        console.log(f.name);

                        fileEntry.createWriter(function(fileWriter) {
                            fileWriter.write(f);
                        }, errorHandler);

                    }, errorHandler);
                })(file);

            }
        }, errorHandler)

    }, errorHandler);

    function errorHandler(e) {
        console.log(e);
    }

}